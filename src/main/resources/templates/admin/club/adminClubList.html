<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>관리자 - 모임 전체 관리</title>
    <style>
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        th { background-color: #f4f4f4; }
        .status-active { color: green; font-weight: bold; }
        .status-pending { color: red; font-weight: bold; background-color: #fff5f5; }
        .btn { padding: 5px 10px; cursor: pointer; border: none; border-radius: 4px; }
        .btn-restore { background-color: #17a2b8; color: white; }
        .btn-hard-delete { background-color: #dc3545; color: white; }
    </style>
</head>
<body>
<h1>모임 전체 관리 (ADMIN)</h1>
<p><a th:href="@{/}">홈으로 돌아가기</a></p>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>모임명</th>
        <th>생성일</th>
        <th>상태</th>
        <th>삭제요청일 / 남은시간</th>
        <th>관리 액션</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="club : ${clubs}" th:classappend="${club.status == 'DELETED_PENDING' ? 'status-pending' : ''}">
        <td th:text="${club.clubId}">1</td>
        <td th:text="${club.name}">자바 모임</td>
        <td th:text="${#temporals.format(club.createdAt, 'yyyy-MM-dd')}">2026-01-01</td>
        <td>
                    <span th:text="${club.status}"
                          th:class="${club.status == 'ACTIVE' ? 'status-active' : 'status-pending'}">ACTIVE</span>
        </td>
        <td>
            <div th:if="${club.status == 'DELETED_PENDING'}">
                <small th:text="${#temporals.format(club.deletedAt, 'yyyy-MM-dd HH:mm')}">날짜</small><br>
                <span th:text="${club.remainingTime}" style="color: blue;">7일 남음</span>
            </div>
            <span th:unless="${club.status == 'DELETED_PENDING'}">-</span>
        </td>
        <td>
            <form th:if="${club.status == 'DELETED_PENDING'}"
                  th:action="@{/admin/club/restore}" method="post" style="display:inline;">
                <input type="hidden" name="clubId" th:value="${club.clubId}">
                <button type="submit" class="btn btn-restore" onclick="return confirm('이 모임을 복구하시겠습니까?');">강제 복구</button>
            </form>

            <form th:action="@{/admin/club/hardDelete}" method="post" style="display:inline;">
                <input type="hidden" name="clubId" th:value="${club.clubId}">
                <button type="submit" class="btn btn-hard-delete" onclick="return confirm('영구 삭제하시겠습니까? 복구가 불가능합니다.');">영구 삭제</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>