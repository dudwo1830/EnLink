<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('EnLink - 모임 목록', ~{::link}, ~{::script})}">
    <link rel="stylesheet" href="#" th:if="${false}"/>
    <script src="#" th:if="${false}"></script>
</head>
<body>
<style>
    .club-img-wrapper {
        width: 200px !important;  /* 원하는 가로 크기 */
        height: 150px !important; /* 원하는 세로 크기 */
        overflow: hidden;
    }
    .club-img-wrapper img {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover;
    }
</style>

<div class="grid-container">
    <header th:replace="~{fragments/header :: header}" class="header"></header>

    <main class="main">
        <div class="list-content-container">
            <h1>EnLink 모임 목록</h1>
            <p th:text="|접속자: ${loginMemberId != null ? loginMemberId : '게스트'}|">접속자 정보</p>
            <hr>

            <div th:if="${#lists.isEmpty(clubs)}" class="empty-msg">개설된 모임이 없습니다.</div>

            <div class="club-list">
                <a th:each="club : ${clubs}" th:href="@{/club/{id}(id=${club.clubId})}" class="club-item-card">

                    <div class="club-img-wrapper">
                        <img th:src="${(club.imageUrl == null or club.imageUrl == '') ? '/images/default_club.jpg' : club.imageUrl}"
                             alt="모임 이미지"
                             onerror="this.onerror=null; this.src='/images/default_club.jpg';">
                    </div>

                    <div class="club-info">
                        <h3 th:text="${club.name}">모임 이름</h3>
                        <p th:text="${club.description}" class="club-desc">모임 설명...</p>

                        <div class="club-meta">
                            <span th:text="${club.topicId == 2 ? '스터디' : '주제'}">주제명</span> ·
                            <span th:text="${club.cityId == 2 ? '강남구' : '지역명'}">지역명</span> ·
                            <span>멤버 <span th:text="${club.currentMemberCount}">0</span> / <span th:text="${club.maxMember}">10</span></span>
                        </div>
                    </div>
                </a>
            </div>

            <div class="list-actions">
                <a th:href="@{/club/create}" class="btn-create">새 모임 만들기</a>
            </div>
        </div>
    </main>

    <footer th:replace="~{fragments/footer :: footer}" class="footer"></footer>
</div>
</body>
</html>