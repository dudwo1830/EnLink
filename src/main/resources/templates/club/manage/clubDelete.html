<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>모임 삭제</title>
</head>
<body>
<div th:fragment="content">
    <h3>모임 관리</h3>

    <div th:if="${club.status == 'DELETED_PENDING'}" class="alert alert-info" style="border: 1px solid #bee5eb; padding: 20px; background-color: #d1ecf1;">
        <p>⚠️ <strong>이 모임은 현재 삭제 대기 상태입니다.</strong></p>
        <p>
            복구 가능 기간이 지나면 모든 데이터가 영구 삭제됩니다. <br>
            <strong>남은 시간: </strong> <span th:text="${club.remainingTime}" style="color: red; font-weight: bold;">7일 0시간 남음</span>
        </p>

        <form th:action="@{|/club/${club.clubId}/manage/restore|}" method="post">
            <button type="submit" class="btn-restore" style="background-color: #17a2b8; color: white;">삭제 취소 (지금 복구하기)</button>
        </form>
    </div>

    <div th:if="${club.status == 'ACTIVE'}" style="border: 1px solid #ffeeba; padding: 20px; background-color: #fff3cd;">
        <p class="warning">모임을 삭제하면 7일 동안의 유예 기간 후 영구 삭제됩니다.</p>

        <form th:action="@{|/club/${club.clubId}/manage/delete|}" method="post" onsubmit="return confirmDelete();">
            <button type="submit" class="danger" style="background-color: #dc3545; color: white;">삭제 요청하기</button>
        </form>
    </div>
</div>

<script th:inline="javascript">
    function confirmDelete() {
        // 사용자에게 다시 한번 확인 메시지를 띄웁니다.
        return confirm("삭제 요청 시 일주일 동안 철회할 수 있으며, 일주일 후에 모든 내용은 자동 삭제됩니다. 진행하시겠습니까?");
    }
</script>

</body>
</html>